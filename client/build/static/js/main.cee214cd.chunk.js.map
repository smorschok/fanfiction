{"version":3,"sources":["components/AllFanfics.js","components/Loader.js","context/AuthContext.js","hooks/http.hook.js","pages/HomePage.js","hooks/message.hook.js","components/FanficList.js","pages/AccountPage.js","pages/AuthPage.js","pages/CreatePage.js","components/GetComments.js","components/Comments.js","components/DeleteFanfic.js","components/FanficCard.js","pages/FanficPage.js","components/AdminList.js","pages/AdminPage.js","components/ChapterFanfic.js","pages/FanficChapterPage.js","pages/CreateChapterPage.js","pages/SearchPage.js","pages/ChangeChapterPage.js","hooks/auth.hook.js","components/localization/locales.js","components/LocalePicker.js","components/Navbar.js","App.js","routes.js","reportWebVitals.js","index.js"],"names":["AllFanfics","fanfics","className","map","item","index","to","_id","title","description","Loader","style","display","justifyContent","paddingTop","noop","AuthContext","createContext","token","userId","email","login","logout","isAuthenticated","useHttp","useState","loading","setLoading","error","setError","request","useCallback","url","a","method","body","headers","JSON","stringify","fetch","response","json","data","ok","Error","message","clearError","HomePage","useContext","setFanfics","fetchFanfics","Authorization","fetched","useEffect","useMessage","text","window","M","toast","html","FanficList","dropFanfic","setDropFanfic","order","setOrder","submit","setSubmit","reorder","list","startIndex","endIndex","result","Array","from","splice","removed","onDragEnd","destination","items","source","newOrder","e","onDragUpdate","createFanficHandler","event","preventDefault","onClick","disabled","id","droppableId","provided","droppableProps","ref","innerRef","draggableId","snapshot","draggableProps","dragHandleProps","margin","placeholder","AccountPage","AuthPage","auth","password","key","form","setForm","updateTextFields","changeHandler","target","name","value","registerHandler","elems","document","querySelector","Modal","init","instance","getInstance","open","loginHandler","location","reload","keyHandler","type","onChange","htmlFor","minLength","marginRight","href","autoComplete","CreatePage","tags","setTags","tagsList","setTagsList","genre","tag","image","fanfic","setFanfic","fetchTags","obj","i","length","modal","querySelectorAll","chips","elem","Chips","autocompleteOptions","limit","Infinity","onChipAdd","chipsData","images","setImages","mdParser","MarkdownIt","Select","MenuItem","multiple","imageList","addUpdateIndex","maxNumber","dataURLKey","onImageUpload","onImageRemoveAll","onImageUpdate","onImageRemove","isDragging","dragProps","color","undefined","src","alt","width","height","renderHTML","render","newValue","replace","GetComments","comments","comment","socket","io","Comments","fanficId","useParams","state","setState","setform","on","off","addComment","emit","border","borderRadius","DeleteFanfic","history","useHistory","access","owner","removeFanfic","push","hidden","FanficCard","chapters","FanficPage","getFanfic","AdminList","users","user","admin","date","AdminPage","setUsers","fetchUsers","ChapterFanfic","chapter","chapterId","cloudName","publicId","crop","parse","FanficChapterPage","setChapter","getChapter","CreateChapterPage","createChapterHandler","SearchPage","search","keyword","ChangeChapterPage","storageName","useAuth","setToken","setUserId","ready","setReady","setEmail","jwtToken","mail","localStorage","setItem","removeItem","getItem","locales","LocalePicker","currentLocale","onLocalChange","NativeSelect","Navbar","setSearch","logoutHandler","sidenav","Sidenav","edge","data-target","messages","enMessage","ruMessage","App","routes","path","exact","useRoutes","setCurrentLocale","Provider","locale","defaultLocale","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.cee214cd.chunk.js","sourcesContent":["import React from \"react\";\r\nimport { NavLink } from \"react-router-dom\";\r\n\r\nexport const AllFanfics = ({ fanfics }) => {\r\n  return (\r\n    <div className=\"row\">\r\n      {fanfics &&\r\n        fanfics.map((item,index) => (\r\n          <NavLink to={`/fanfic/${item._id}`} key={item._id} \r\n          className=\"col s8 offset-s2\"\r\n\r\n          >\r\n            <div\r\n              className=\"card deep-orange darken-1 hoverable row\"\r\n              \r\n            >\r\n                <h5 className=\"card-content white-text col s1\">\r\n                              {index + 1}\r\n                            </h5>\r\n              <div className=\"card-content white-text col s11\">\r\n                <span className=\"card-title\">{item.title}</span>\r\n                <p>{item.description}</p>\r\n              </div>\r\n            </div>\r\n          </NavLink>\r\n        ))}\r\n    </div>\r\n  );\r\n};\r\n","import React from 'react'\r\n\r\nexport const Loader = () =>{\r\n    return(\r\n        <div style={{display:\"flex\", justifyContent:'center', paddingTop:'2rem'}}>\r\n            <div className=\"preloader-wrapper big  active\">\r\n                <div className=\"spinner-layer spinner-red-only\">\r\n                    <div className=\"circle-clipper left\">\r\n                    <div className=\"circle\"></div>\r\n                    </div><div className=\"gap-patch\">\r\n                    <div className=\"circle\"></div>\r\n                    </div><div className=\"circle-clipper right\">\r\n                    <div className=\"circle\"></div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n    \r\n}","import {createContext} from 'react'\r\nfunction noop() {}\r\n\r\nexport const AuthContext = createContext({\r\n    token:null,\r\n    userId:null,\r\n    email:null,\r\n    login:noop,\r\n    logout:noop,\r\n    isAuthenticated:false\r\n\r\n})","\r\nimport {useState,useCallback} from 'react'\r\n\r\nexport const useHttp = () => {\r\n    const [loading,setLoading] = useState(false)\r\n    const [error,setError] = useState(null)\r\n    const request =useCallback(async (url,method = 'GET', body = null, headers = {}) =>{\r\n        setLoading(true)\r\n        try{\r\n            if(body){\r\n                body = JSON.stringify(body)\r\n                headers['Content-Type'] = 'application/json'\r\n            }\r\n            const response = await fetch(url,{method,body,headers})\r\n            const data = await response.json()\r\n            if(!response.ok){\r\n                throw new Error(data.message || 'Что-то пошло не так')\r\n            }\r\n\r\n            setLoading(false)\r\n\r\n            return data\r\n        }catch(e){\r\n            setLoading(false)\r\n            setError(e.message)\r\n            throw e\r\n\r\n        }\r\n    },[])\r\n\r\n    const clearError = useCallback (()=> setError(null),[])\r\n\r\n    return {loading,request,error,clearError}\r\n}","import React, { useCallback, useContext, useEffect, useState } from 'react'\r\nimport { AllFanfics } from '../components/AllFanfics'\r\nimport { Loader } from '../components/Loader'\r\nimport { AuthContext } from '../context/AuthContext'\r\nimport { useHttp } from '../hooks/http.hook'\r\n\r\nexport const HomePage = () =>{\r\n  const {token} = useContext(AuthContext)\r\n  const {loading,request} = useHttp()\r\n  const [fanfics,setFanfics] = useState([])\r\n    const fetchFanfics= useCallback(async() =>{\r\n\r\n        try {\r\n          const fetched = await request('api/fanfic',\"GET\",null,{\r\n            Authorization:`Bearer ${token}`\r\n          })\r\n          setFanfics(fetched)\r\n        } catch (e) {\r\n        }\r\n      },[token,request])\r\n    \r\n      useEffect(()=>{\r\n        fetchFanfics()\r\n      },[fetchFanfics])\r\n\r\n      if(loading){\r\n        return <Loader/>\r\n      }\r\n  \r\n      return (\r\n        <div>\r\n        {!loading && <AllFanfics fanfics = {fanfics}/>}\r\n        </div>\r\n      )\r\n}\r\n","import {useCallback} from 'react'\r\nexport const useMessage = () =>{\r\n    return useCallback(text => {\r\n        if(window.M && text){\r\n            window.M.toast({ html: text })\r\n        }\r\n    },[])\r\n}","import React, { useContext, useEffect, useState } from \"react\";\r\nimport { NavLink } from \"react-router-dom\";\r\nimport { DragDropContext, Droppable, Draggable } from \"react-beautiful-dnd\";\r\nimport { useHttp } from \"../hooks/http.hook\";\r\nimport { AuthContext } from \"../context/AuthContext\";\r\nimport { useMessage } from \"../hooks/message.hook\";\r\nimport { FormattedMessage } from \"react-intl\";\r\n\r\nexport const FanficList = ({ fanfics }) => {\r\n  const { token } = useContext(AuthContext);\r\n  const message = useMessage();\r\n  const { request } = useHttp();\r\n  const [dropFanfic, setDropFanfic] = useState(null);\r\n  const [order, setOrder] = useState([]);\r\n  const [submit, setSubmit] = useState(true);\r\n\r\n  useEffect(() => {\r\n    setDropFanfic(fanfics);\r\n  }, [fanfics]);\r\n\r\n  const reorder = (list, startIndex, endIndex) => {\r\n    const result = Array.from(list);\r\n    const [removed] = result.splice(startIndex, 1);\r\n    result.splice(endIndex, 0, removed);\r\n\r\n    return result;\r\n  };\r\n\r\n  const onDragEnd = async (result) => {\r\n    if (!result.destination) {\r\n      return;\r\n    }\r\n    const items = reorder(\r\n      dropFanfic,\r\n      result.source.index,\r\n      result.destination.index\r\n    );\r\n    setDropFanfic(items);\r\n    const newOrder = items.map((e) => {\r\n      return e._id;\r\n    });\r\n    setOrder([newOrder]);\r\n  };\r\n\r\n  const onDragUpdate = async (result) => {\r\n    setSubmit(false);\r\n  };\r\n\r\n  const createFanficHandler = async (event) => {\r\n    event.preventDefault();\r\n    setSubmit(true);\r\n    try {\r\n      const data = await request(\r\n        \"api/user/updateOrder\",\r\n        \"POST\",\r\n        { ...order },\r\n        {\r\n          Authorization: `Bearer ${token}`,\r\n        }\r\n      );\r\n      message(data.message);\r\n    } catch (e) {}\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <div className=\"center \">\r\n        <button\r\n          className=\"btn orange darken-1 card\"\r\n          onClick={createFanficHandler}\r\n          disabled={submit}\r\n        >\r\n          <FormattedMessage id=\"account-button.save\" />\r\n        </button>\r\n      </div>\r\n      <DragDropContext onDragEnd={onDragEnd} onDragUpdate={onDragUpdate}>\r\n        <Droppable droppableId=\"droppable\">\r\n          {(provided) => (\r\n            <div {...provided.droppableProps} ref={provided.innerRef}>\r\n              {dropFanfic &&\r\n                dropFanfic.map((item, index) => (\r\n                  <Draggable\r\n                    key={item._id}\r\n                    draggableId={item._id}\r\n                    index={index}\r\n                  >\r\n                    {(provided, snapshot) => (\r\n                      <div\r\n                        ref={provided.innerRef}\r\n                        {...provided.draggableProps}\r\n                        {...provided.dragHandleProps}\r\n                        className=\"row\"\r\n                      >\r\n                        <NavLink\r\n                          to={`/fanfic/${item._id}`}\r\n                          className=\"col s10 offset-s1\"\r\n                        >\r\n                          <div\r\n                            className=\"card deep-orange darken-1 hoverable row\"\r\n                            style={{ margin: \"0\" }}\r\n                          >\r\n                            <h5 className=\"card-content white-text col s1\">\r\n                              {index + 1}\r\n                            </h5>\r\n\r\n                            <div className=\"card-content white-text col s11\">\r\n                              <span className=\"card-title\">{item.title}</span>\r\n                              <p>{item.description}</p>\r\n                            </div>\r\n                          </div>\r\n                        </NavLink>\r\n                      </div>\r\n                    )}\r\n                  </Draggable>\r\n                ))}\r\n              {provided.placeholder}\r\n            </div>\r\n          )}\r\n        </Droppable>\r\n      </DragDropContext>\r\n    </div>\r\n  );\r\n};\r\n","import React, { useCallback, useContext, useEffect, useState } from \"react\";\r\nimport { useHttp } from \"../hooks/http.hook\";\r\nimport { AuthContext } from \"../context/AuthContext\";\r\nimport { FanficList } from \"../components/FanficList\";\r\nimport { Loader } from \"../components/Loader\";\r\nimport { NavLink } from \"react-router-dom\";\r\nimport { FormattedMessage } from \"react-intl\";\r\n\r\nexport const AccountPage = () => {\r\n  const { token } = useContext(AuthContext);\r\n  const { loading, request } = useHttp();\r\n  const [fanfics, setFanfics] = useState([]);\r\n\r\n  const fetchFanfics = useCallback(async () => {\r\n    try {\r\n      const fetched = await request(\"api/user\", \"GET\", null, {\r\n        Authorization: `Bearer ${token}`,\r\n      });\r\n      setFanfics(fetched);\r\n    } catch (e) {}\r\n  }, [token, request]);\r\n  useEffect(() => {\r\n    fetchFanfics();\r\n  }, [fetchFanfics]);\r\n\r\n  if (loading) {\r\n    return <Loader />;\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <div className = 'center'>\r\n      <NavLink\r\n        className=\"waves-effect waves-light btn-large orange darken-1 card\"\r\n        to=\"/create\"\r\n      >\r\n                    <FormattedMessage id=\"account-button.create\" />\r\n\r\n      </NavLink>\r\n</div>\r\n      {!loading && <FanficList fanfics={fanfics} />}\r\n    </div>\r\n  );\r\n};\r\n","import React, { useContext, useEffect, useState } from \"react\";\r\nimport { useHttp } from \"../hooks/http.hook\";\r\nimport { useMessage } from \"../hooks/message.hook\";\r\nimport { AuthContext } from \"../context/AuthContext\";\r\nimport { FormattedMessage } from \"react-intl\";\r\n\r\nexport const AuthPage = () => {\r\n  const auth = useContext(AuthContext);\r\n  const message = useMessage();\r\n  const { loading, request, error, clearError } = useHttp();\r\n  const [form, setForm] = useState({\r\n    email: \"\",\r\n    password: \"\",\r\n    key: \"\",\r\n  });\r\n\r\n  useEffect(() => {\r\n    message(error);\r\n    clearError();\r\n  }, [error, message, clearError]);\r\n\r\n  useEffect(() => {\r\n    window.M.updateTextFields();\r\n  }, []);\r\n\r\n  const changeHandler = (event) => {\r\n    setForm({ ...form, [event.target.name]: event.target.value });\r\n  };\r\n\r\n  const registerHandler = async () => {\r\n    var elems = document.querySelector(\".modal\");\r\n    window.M.Modal.init(elems);\r\n    var instance = window.M.Modal.getInstance(elems);\r\n    try {\r\n      const data = await request(\"api/auth/register\", \"POST\", { ...form });\r\n      instance.open();\r\n      message(data.message);\r\n    } catch (e) {}\r\n  };\r\n\r\n  const loginHandler = async () => {\r\n    try {\r\n      const data = await request(\"api/auth/login\", \"POST\", { ...form });\r\n      auth.login(data.token, data.userId, data.email);\r\n\r\n      window.location.reload();\r\n    } catch (e) {}\r\n  };\r\n\r\n  const keyHandler = async () => {\r\n    try {\r\n      const data = await request(\"api/auth/key\", \"POST\", { ...form });\r\n      message(data.message);\r\n    } catch (e) {}\r\n  };\r\n\r\n  return (\r\n    <div className=\"row\">\r\n      <div className=\"col s6 offset-s3\">\r\n        <h1 className=\"center\">\r\n          <FormattedMessage id=\"autentification.title\" />\r\n        </h1>\r\n        <div className=\"card white darken-1\">\r\n          <div className=\"card-content white-text\">\r\n            <div>\r\n              <div className=\"input-field\">\r\n                <input\r\n                  id=\"email\"\r\n                  type=\"text\"\r\n                  name=\"email\"\r\n                  className=\"color-input\"\r\n                  value={form.email}\r\n                  onChange={changeHandler}\r\n                />\r\n                <label htmlFor=\"email\">\r\n                  <FormattedMessage id=\"autentification-email.label\" />\r\n                </label>\r\n              </div>\r\n\r\n              <div className=\"input-field\">\r\n                <input\r\n                  id=\"password\"\r\n                  type=\"password\"\r\n                  name=\"password\"\r\n                  minLength=\"6\"\r\n                  className=\"color-input\"\r\n                  value={form.password}\r\n                  onChange={changeHandler}\r\n                />\r\n                <label htmlFor=\"password\">\r\n                  <FormattedMessage id=\"autentification-password.label\" />\r\n                </label>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"card-action\">\r\n            <button\r\n              className=\"btn yellow darken-4\"\r\n              style={{ marginRight: 10 }}\r\n              onClick={loginHandler}\r\n              disabled={loading}\r\n            >\r\n              <FormattedMessage id=\"autentification-button.login\" />\r\n            </button>\r\n\r\n            <a\r\n              href=\"#!\"\r\n              className=\"waves-effect waves-light btn  \"\r\n              onClick={registerHandler}\r\n              disabled={loading}\r\n            >\r\n              <FormattedMessage id=\"autentification-button.register\" />\r\n            </a>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div id=\"modal1\" className=\"modal\">\r\n        <div className=\"modal-content\">\r\n          <div className=\"input-field col s12\">\r\n            <input\r\n              placeholder=\"Введите ключ\"\r\n              id=\"key\"\r\n              type=\"text\"\r\n              name=\"key\"\r\n              className=\"color-input\"\r\n              value={form.key}\r\n              onChange={changeHandler}\r\n              autoComplete={\"off\"}\r\n            />\r\n            <label htmlFor=\"key\">Введите ключ, присланный вам на почту</label>\r\n          </div>\r\n        </div>\r\n        <button\r\n          className=\"modal-close waves-effect waves-green btn right\"\r\n          onClick={keyHandler}\r\n        >\r\n          ОК\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n","import React, { useCallback, useContext, useEffect, useState } from \"react\";\r\nimport { AuthContext } from \"../context/AuthContext\";\r\nimport { useHttp } from \"../hooks/http.hook\";\r\nimport { useMessage } from \"../hooks/message.hook\";\r\nimport Select from \"@material-ui/core/Select\";\r\nimport MarkdownIt from \"markdown-it\";\r\nimport MdEditor from \"react-markdown-editor-lite\";\r\nimport \"react-markdown-editor-lite/lib/index.css\";\r\nimport ImageUploading from \"react-images-uploading\";\r\nimport { FormattedMessage  } from \"react-intl\";\r\nimport { MenuItem } from \"@material-ui/core\";\r\n\r\nexport const CreatePage = () => {\r\n  const { token } = useContext(AuthContext);\r\n  const message = useMessage();\r\n  const { request, error, clearError } = useHttp();\r\n  const [tags, setTags] = useState(null);\r\n  const [tagsList, setTagsList] = useState(null);\r\n  const [fanfic, setFanfic] = useState({\r\n    title: \"\",\r\n    description: \"\",\r\n    genre: \"\",\r\n    tag: [],\r\n    text: \"\",\r\n    name: \"\",\r\n    image: \"\",\r\n  });\r\n\r\n  const fetchTags = useCallback(async () => {\r\n    try {\r\n      const fetched = await request(\"api/user/tag\", \"GET\", null, {\r\n        Authorization: `Bearer ${token}`,\r\n      });\r\n      setTags(fetched.tags);\r\n    } catch (e) {}\r\n  }, [token, request]);\r\n\r\n  useEffect(() => {\r\n    fetchTags();\r\n  }, [fetchTags]);\r\n\r\n  useEffect(() => {\r\n    message(error);\r\n    clearError();\r\n  }, [error, message, clearError]);\r\n\r\n  useEffect(() => {\r\n    let obj = {};\r\n    if (tags) {\r\n      for (let i = 0; i < tags.length; i++) {\r\n        obj[tags[i]] = null;\r\n      }\r\n      setTagsList(obj);\r\n    }\r\n  }, [tags]);\r\n\r\n  useEffect(() => {\r\n    var modal = document.querySelectorAll(\".modal\");\r\n    window.M.Modal.init(modal);\r\n    window.M.updateTextFields();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    var chips = document.querySelector(\".chips\");\r\n    let elem = window.M.Chips.init(chips, {\r\n      autocompleteOptions: {\r\n        data: tagsList,\r\n        limit: Infinity,\r\n        minLength: 1,\r\n      },\r\n      onChipAdd: function () {\r\n        setFanfic(fanfic, (fanfic.tag = elem.chipsData));\r\n      },\r\n    });\r\n  }, [fanfic, tagsList]);\r\n\r\n  const changeHandler = (event) => {\r\n    setFanfic({ ...fanfic, [event.target.name]: event.target.value });\r\n  };\r\n\r\n  const handleEditorChange = ({ html, text }) => {\r\n    const newValue = text.replace(/\\d/g, \"\");\r\n    setFanfic({ ...fanfic, text: newValue });\r\n  };\r\n\r\n  const createFanficHandler = async (event) => {\r\n    event.preventDefault();\r\n    try {\r\n      const data = await request(\r\n        \"api/user/newFanfic\",\r\n        \"POST\",\r\n        { ...fanfic },\r\n        {\r\n          Authorization: `Bearer ${token}`,\r\n        }\r\n      );\r\n      message(data.message);\r\n    } catch (e) {}\r\n  };\r\n\r\n  const [images, setImages] = useState([]);\r\n  const maxNumber = 1;\r\n\r\n  const onChange = (imageList, addUpdateIndex) => {\r\n    setImages(imageList);\r\n    setFanfic({ ...fanfic, image: imageList[0] });\r\n  };\r\n\r\n  const mdParser = new MarkdownIt();\r\n  \r\n  \r\n\r\n  return (\r\n    <div className=\"row\">\r\n      <div className=\"container\">\r\n        <div className=\"row card orange lighten-3 z-depth-4\">\r\n          <div className=\"col s12  center\">\r\n            <h3>          <FormattedMessage id=\"fanfic-create.title-fanfic\" />\r\n</h3>\r\n          </div>\r\n          <div className=\"input-field col s12\">\r\n            <textarea\r\n              id=\"title\"\r\n              name=\"title\"\r\n              type=\"text\"\r\n              className=\"materialize-textarea center\"\r\n              value={fanfic.title}\r\n              onChange={changeHandler}\r\n            />\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"row card orange lighten-3 z-depth-4\">\r\n          <div className=\"col s12  center\">\r\n            <h3>           <FormattedMessage id=\"fanfic-create.description\" />\r\n</h3>\r\n          </div>\r\n          <div className=\"input-field col s12\">\r\n            <textarea\r\n              id=\"description\"\r\n              name=\"description\"\r\n              className=\"materialize-textarea\"\r\n              value={fanfic.description}\r\n              onChange={changeHandler}\r\n            ></textarea>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"row card orange lighten-3  z-depth-4\">\r\n          <div className=\"col s12  center\">\r\n            <h3>           <FormattedMessage id=\"fanfic-create.genre\" />\r\n</h3>\r\n          </div>\r\n          <div className=\"input-field col s12\">\r\n            <div>\r\n              <Select\r\n                className=\"input-field col s12\"\r\n                id=\"demo-controlled-open-select\"\r\n                name=\"genre\"\r\n                value={fanfic.genre}\r\n                onChange={changeHandler}\r\n              >\r\n                <MenuItem value={\"\"}> <FormattedMessage id={'fanfic-create.genre-0'} /></MenuItem>\r\n                <MenuItem value={\"Детектив\"}><FormattedMessage id={'fanfic-create.genre-1'} /> </MenuItem>\r\n                <MenuItem value={\"Триллер\"}><FormattedMessage id={'fanfic-create.genre-2'} /></MenuItem>\r\n                <MenuItem value={\"Роман\"}><FormattedMessage id={'fanfic-create.genre-3'} /></MenuItem>\r\n                <MenuItem value={\"Приключения\"}><FormattedMessage id={'fanfic-create.genre-4'} /></MenuItem>\r\n                <MenuItem value={\"Фантастика\"}><FormattedMessage id={'fanfic-create.genre-5'} /></MenuItem>\r\n                <MenuItem value={\"Фольклор\"}><FormattedMessage id={'fanfic-create.genre-6'} /></MenuItem>\r\n                <MenuItem value={\"Юмор\"}><FormattedMessage id={'fanfic-create.genre-7'} /></MenuItem>\r\n                <MenuItem value={\"Прочее\"}><FormattedMessage id={'fanfic-create.genre-8'} /></MenuItem>\r\n              </Select>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"row card orange lighten-3  z-depth-4\">\r\n          <div className=\"col s12  center\">\r\n            <h3>          <FormattedMessage id=\"fanfic-create.tags\" />\r\n</h3>\r\n          </div>\r\n          <div className=\"input-field col s12 \">\r\n            <div className=\"chips\">\r\n              <input\r\n                name=\"tag\"\r\n                className=\"custom-class chips-autocomplete\"\r\n                autoComplete={\"off\"}\r\n              />\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"row card orange lighten-3  z-depth-4\">\r\n          <div className=\"col s12  center\">\r\n            <h3>           <FormattedMessage id=\"fanfic-create.title-chapter\" />\r\n</h3>\r\n          </div>\r\n          <div className=\"input-field col s12\">\r\n            <textarea\r\n              id=\"textarea1\"\r\n              name=\"name\"\r\n              className=\"materialize-textarea center\"\r\n              value={fanfic.name}\r\n              onChange={changeHandler}\r\n            ></textarea>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"row card orange lighten-3 z-depth-4\">\r\n          <div className=\"col s12  center\">\r\n            <h3>           <FormattedMessage id=\"fanfic-create.text-chapter\" />\r\n</h3>\r\n          </div>\r\n          <ImageUploading\r\n            multiple\r\n            value={images}\r\n            onChange={onChange}\r\n            maxNumber={maxNumber}\r\n            dataURLKey=\"data_url\"\r\n          >\r\n            {({\r\n              imageList,\r\n              onImageUpload,\r\n              onImageRemoveAll,\r\n              onImageUpdate,\r\n              onImageRemove,\r\n              isDragging,\r\n              dragProps,\r\n            }) => (\r\n              <div className=\"upload__image-wrapper\">\r\n                <button\r\n                  className=\"btn\"\r\n                  style={isDragging ? { color: \"red\" } : undefined}\r\n                  onClick={onImageUpload}\r\n                  {...dragProps}\r\n                >\r\n                  Click or Drop here\r\n                </button>\r\n                &nbsp;\r\n                <button className=\"btn\" onClick={onImageRemoveAll}>\r\n                  Remove all images\r\n                </button>\r\n                {imageList.map((image, index) => (\r\n                  <div key={index} className=\"image-item\">\r\n                    <img src={image[\"data_url\"]} alt=\"\" width=\"100\" />\r\n                    <div className=\"image-item__btn-wrapper\">\r\n                      <button\r\n                        className=\"btn\"\r\n                        onClick={() => onImageUpdate(index)}\r\n                      >\r\n                        Update\r\n                      </button>\r\n                      <button\r\n                        className=\"btn\"\r\n                        onClick={() => onImageRemove(index)}\r\n                      >\r\n                        Remove\r\n                      </button>\r\n                    </div>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            )}\r\n          </ImageUploading>\r\n          <MdEditor\r\n            name=\"text\"\r\n            value={fanfic.text}\r\n            style={{ height: \"500px\" }}\r\n            renderHTML={(text) => mdParser.render(text)}\r\n            onChange={handleEditorChange}\r\n          />\r\n        </div>\r\n\r\n        <button\r\n          type=\"button\"\r\n          className=\"waves-effect right btn orange darken-1 card\"\r\n          onClick={createFanficHandler}\r\n        >\r\n          Создать фанфик\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n","import React from 'react'\r\n\r\nexport const GetComments = ({comments})=>{\r\n    return(\r\n        <>\r\n        {comments && comments.map((comment,i) => \r\n          <li className = 'collection-item' key={i}><strong>{comment.name}: </strong>{comment.text}</li>\r\n        )}\r\n        </>\r\n    )\r\n}","import React, { useContext, useEffect, useState } from \"react\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport { AuthContext } from \"../context/AuthContext\";\r\nimport { useHttp } from \"../hooks/http.hook\";\r\nimport { GetComments } from \"./GetComments\";\r\nimport io from \"socket.io-client\";\r\nimport { useMessage } from \"../hooks/message.hook\";\r\nimport { FormattedMessage } from \"react-intl\";\r\n\r\nconst socket = io();\r\n\r\nexport const Comments = ({ comments }) => {\r\n  const message = useMessage();\r\n  const auth = useContext(AuthContext);\r\n  const fanficId = useParams().id;\r\n  const { request } = useHttp();\r\n  const [state, setState] = useState([]);\r\n  const [form, setform] = useState({ name: auth.email, comment: \"\" });\r\n  useEffect(() => {\r\n    socket.on(\"message\", ({ name, comment }) => {\r\n      setState([...state, { name, comment }]);\r\n    });\r\n    return () => {\r\n      socket.off(\"message\");\r\n    };\r\n  });\r\n\r\n  const addComment = async () => {\r\n    if (form.comment) {\r\n      try {\r\n        await request(\r\n          `/api/user/comment/${fanficId}`,\r\n          \"POST\",\r\n          { ...form },\r\n          {\r\n            Authorization: `Beare ${auth.token}`,\r\n          }\r\n        );\r\n        socket.emit(\"message\", form);\r\n      } catch (e) {\r\n        message(\"Вы не авторизованы\");\r\n      }\r\n      setform({ ...form, name: auth.email, comment: \"\" });\r\n    }\r\n  };\r\n\r\n  const handleChange = (e) => {\r\n    setform({ ...form, [e.target.name]: e.target.value });\r\n  };\r\n\r\n  return (\r\n    <div className=\"container\">\r\n      <div>\r\n        <textarea\r\n          className=\"materialize-textarea white\"\r\n          id=\"textarea1\"\r\n          name=\"comment\"\r\n          value={form.comment}\r\n          onChange={handleChange}\r\n          placeholder={\"Комментарий\"}\r\n        ></textarea>\r\n      </div>\r\n\r\n      <div className=\"row\">\r\n        <button className=\"btn orange darken-1\" onClick={addComment}>\r\n          <FormattedMessage id=\"fanficCard-button.addComment\" />\r\n        </button>\r\n      </div>\r\n\r\n      <ul\r\n        className=\"collection card\"\r\n        style={{ border: \"2px solid #000\", borderRadius: \"10px\" }}\r\n      >\r\n        <GetComments comments={comments} />\r\n        {state &&\r\n          state.map((comment, i) => (\r\n            <li className=\"collection-item\" key={i}>\r\n              <strong>{comment.name}: </strong>\r\n              {comment.comment}\r\n            </li>\r\n          ))}\r\n      </ul>\r\n    </div>\r\n  );\r\n};\r\n","import React, { useContext, useEffect } from \"react\";\r\nimport { useHistory, useParams } from \"react-router-dom\";\r\nimport { AuthContext } from \"../context/AuthContext\";\r\nimport { useHttp } from \"../hooks/http.hook\";\r\nimport { FormattedMessage } from \"react-intl\";\r\n\r\nexport const DeleteFanfic = ({ fanfic }) => {\r\n  const { request } = useHttp();\r\n  const fanficId = useParams().id;\r\n  const history = useHistory();\r\n  const auth = useContext(AuthContext);\r\n  const access = auth.userId === fanfic.owner;\r\n  useEffect(() => {\r\n    var elems = document.querySelectorAll(\".modal\");\r\n    window.M.Modal.init(elems);\r\n  });\r\n  const removeFanfic = async () => {\r\n    try {\r\n      await request(`/api/user/delete/${fanficId}`, \"POST\", null, {\r\n        Authorization: `Beare ${auth.token}`,\r\n      });\r\n      history.push(\"/account\");\r\n    } catch (e) {}\r\n  };\r\n\r\n  return (\r\n    <div className=\"center\">\r\n      <div hidden={!access}>\r\n        <a\r\n          className=\"waves-effect waves-light btn modal-trigger card orange darken-1\"\r\n          href=\"#modal1\"\r\n        >\r\n          {\" \"}\r\n          <FormattedMessage id=\"fanficCard-button.deleteFanfic\" />\r\n        </a>\r\n      </div>\r\n      <div id=\"modal1\" className=\"modal\">\r\n        <div className=\"modal-content\">\r\n          <h4>Вы уверены,что хотите удалить фанфик ?</h4>\r\n        </div>\r\n        <div className=\"modal-footer \">\r\n          <button\r\n            className=\"modal-close waves-effect waves-green btn-flat\"\r\n            onClick={removeFanfic}\r\n          >\r\n            Удалить\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n","import React, { useContext } from \"react\";\r\nimport { NavLink } from \"react-router-dom\";\r\nimport { AuthContext } from \"../context/AuthContext\";\r\nimport { FormattedMessage } from \"react-intl\";\r\n\r\nexport const FanficCard = ({ fanfic }) => {\r\n  const auth = useContext(AuthContext);\r\n  const access = auth.userId === fanfic.owner;\r\n  return (\r\n    <>\r\n      <h3 className=\"center\">{fanfic.title}</h3>\r\n      <div className=\"center tag-container\">\r\n        {fanfic.tag.map((e, index) => {\r\n          return (\r\n            <span className=\"chip  deep-orange accent-1\" key={index}>\r\n              {e.tag}\r\n            </span>\r\n          );\r\n        })}\r\n      </div>\r\n\r\n      <div className=\"container row\">\r\n        <p>\r\n          <strong>Краткое описание:</strong> {fanfic.description}\r\n        </p>\r\n        <p>\r\n          <strong>Жанр:</strong> {fanfic.genre}\r\n        </p>\r\n        <div hidden={!access}>\r\n          <NavLink\r\n            className=\"btn row orange darken-1 card\"\r\n            to={`/chapterAdd/${fanfic._id}`}\r\n          >\r\n            {\" \"}\r\n            <FormattedMessage id=\"fanficCard-button.addFanfic\" />\r\n          </NavLink>\r\n        </div>\r\n        <div className=\"collection\">\r\n          {fanfic.chapters.map((e) => {\r\n            return (\r\n              <NavLink\r\n                className=\"collection-item orange lighten-1\"\r\n                style={{ color: \"#fff\" }}\r\n                to={`/chapter/${e._id}`}\r\n                key={e._id}\r\n              >\r\n                {e.name}\r\n              </NavLink>\r\n            );\r\n          })}\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n","import React, { useCallback, useContext, useEffect, useState } from 'react'\r\nimport {useParams} from 'react-router-dom'\r\nimport { Comments } from '../components/Comments'\r\nimport { DeleteFanfic } from '../components/DeleteFanfic'\r\nimport { FanficCard } from '../components/FanficCard'\r\nimport { Loader } from '../components/Loader'\r\nimport { AuthContext } from '../context/AuthContext'\r\nimport { useHttp } from '../hooks/http.hook'\r\n\r\nexport const FanficPage = () =>{\r\n    const {token} = useContext(AuthContext)\r\n    const {request,loading} = useHttp()\r\n    const [fanfic,setFanfic] = useState(null)\r\n    const fanficId = useParams().id\r\n    const getFanfic = useCallback(async()=>{\r\n\r\n      try {\r\n          const fetched =  await request(`/api/fanfic/${fanficId}`,'GET',null,{\r\n          Authorization:`Beare ${token}`\r\n        })\r\n        setFanfic(fetched)\r\n      } catch (e) {\r\n      }\r\n\r\n    },[token,fanficId,request])\r\n\r\n    useEffect(()=>{\r\n      getFanfic()\r\n    },[getFanfic])\r\n\r\n    if(loading){\r\n      return <Loader/>\r\n    }\r\n  return (\r\n    <div className = 'container'>\r\n    {!loading && fanfic && <DeleteFanfic fanfic = {fanfic}/>}\r\n    \r\n      {!loading && fanfic && <FanficCard  fanfic = {fanfic}/>}\r\n      {!loading && fanfic && <Comments comments = {fanfic.comments}/>}\r\n      \r\n    \r\n    </div>\r\n  )\r\n}\r\n","import React from 'react'\r\n\r\nexport const AdminList = ({users})=>{\r\n    return(\r\n        <div>\r\n            \r\n        \r\n                <table>\r\n        <thead>\r\n          <tr>\r\n              <th>email</th>\r\n              <th>Админ-доступ</th>\r\n              <th>Дата регистрации</th>\r\n\r\n          </tr>\r\n        </thead>\r\n\r\n        <tbody>\r\n        {\r\n          users.map(user => {\r\n             return(\r\n          <tr key = {user._id}>\r\n            <td>{user.email}</td>\r\n            <td>{user.admin && <span className=\"material-icons\" style = {{color:'green'}}>check</span>}</td>\r\n            <td>{user.date}</td>\r\n\r\n          </tr>\r\n        \r\n             )  \r\n           })}\r\n          </tbody>\r\n      </table>\r\n        </div>\r\n    )\r\n}","import React, { useCallback, useContext, useEffect, useState } from 'react'\r\nimport { AdminList } from '../components/AdminList'\r\nimport { Loader } from '../components/Loader'\r\nimport { AuthContext } from '../context/AuthContext'\r\nimport { useHttp } from '../hooks/http.hook'\r\n\r\n\r\nexport const AdminPage = ()=>{\r\n    const {token} = useContext(AuthContext)\r\n  const {loading,request} = useHttp()\r\n  const [users,setUsers] = useState([])\r\n    const fetchUsers= useCallback(async() =>{\r\n        try {\r\n            \r\n          const fetched = await request('api/admin',\"GET\",null,{\r\n            Authorization:`Bearer ${token}`\r\n          })\r\n          setUsers(fetched)\r\n        } catch (e) {\r\n          \r\n        }\r\n      },[token,request])\r\n    \r\n      useEffect(()=>{\r\n        fetchUsers()\r\n    \r\n      },[fetchUsers])\r\n    \r\n     \r\n    if(loading){\r\n        return <Loader/>\r\n    }\r\n    return(\r\n        <div>\r\n            <AdminList users = {users}/>\r\n        </div>\r\n    )\r\n}","import React from \"react\";\r\nimport MarkdownIt from \"markdown-it\";\r\nimport parse from \"html-react-parser\";\r\nimport { Image } from \"cloudinary-react\";\r\nimport { NavLink, useParams } from \"react-router-dom\";\r\nimport { FormattedMessage } from \"react-intl\";\r\n\r\nexport const ChapterFanfic = ({ chapter }) => {\r\n  const mdParser = new MarkdownIt();\r\n  const chapterId = useParams().id;\r\n\r\n  return (\r\n    <>\r\n      <div className=\"center\">\r\n        <NavLink\r\n          className=\"btn card orange darken-1\"\r\n          to={`/chapterChange/${chapterId}`}\r\n        >\r\n          \r\n          <FormattedMessage id=\"chapterFanfic-button.amendChapter\" />\r\n        </NavLink>\r\n      </div>\r\n      {chapter.map((e) => {\r\n        return (\r\n          <div key={e._id} className=\"container\">\r\n            <div className=\"center\">\r\n              {e.chapters[0].image &&<Image\r\n                cloudName=\"dkqgboopg\"\r\n                publicId={`${e.chapters[0].image}`}\r\n                width=\"200\"\r\n                height=\"200\"\r\n                crop=\"scale\"\r\n                className=\"card\"\r\n              />}\r\n              \r\n              <h3> {e.chapters[0].name}</h3>\r\n            </div>\r\n            {parse(mdParser.render(e.chapters[0].text))}\r\n          </div>\r\n        );\r\n      })}\r\n    </>\r\n  );\r\n};\r\n","import React, { useCallback, useContext, useEffect, useState } from 'react'\r\nimport {useParams} from 'react-router-dom'\r\nimport { ChapterFanfic } from '../components/ChapterFanfic'\r\nimport { Loader } from '../components/Loader'\r\nimport { AuthContext } from '../context/AuthContext'\r\nimport { useHttp } from '../hooks/http.hook'\r\n\r\nexport const FanficChapterPage = ()=>{\r\n    const {token} = useContext(AuthContext)\r\n  const {request,loading} = useHttp()\r\n  const [chapter,setChapter] = useState(null)\r\n  const chapterId = useParams().id\r\n\r\n  const getChapter= useCallback(async()=>{\r\n    try {\r\n    const fetched =  await request(`/api/fanfic/chapter/${chapterId}`,'GET',null,{\r\n        Authorization:`Beare ${token}`\r\n      })\r\n      setChapter(fetched)\r\n    } catch (e) {\r\n      \r\n    }\r\n  },[token,chapterId,request])\r\n\r\n  useEffect(()=>{\r\n    getChapter()\r\n  },[getChapter])\r\n\r\n  if(loading){\r\n      return <Loader/>\r\n  }\r\n    \r\n  return(\r\n      <div>\r\n        {!loading && chapter && <ChapterFanfic chapter = {chapter}/>}\r\n      </div>\r\n  )\r\n}","import React, { useContext, useEffect, useState } from 'react'\r\nimport MarkdownIt from 'markdown-it'\r\nimport MdEditor from 'react-markdown-editor-lite'\r\nimport { useHttp } from '../hooks/http.hook'\r\nimport { useParams } from 'react-router-dom'\r\nimport { AuthContext } from '../context/AuthContext'\r\nimport { useMessage } from '../hooks/message.hook'\r\nexport const CreateChapterPage = ()=>{\r\n    const {token} = useContext(AuthContext)\r\n  const {request,error,clearError} = useHttp()\r\n  const message = useMessage()\r\n\r\n    const[chapter,setChapter] = useState(\r\n        {name:'',text:''}\r\n    )\r\n\r\n    useEffect(()=>{\r\n        window.M.updateTextFields()\r\n\r\n    })\r\n    useEffect(()=>{\r\n        message(error)\r\n        clearError()\r\n      },[error,message,clearError])\r\n    const chapterId = useParams().id\r\n\r\n    const changeHandler = event =>{\r\n        setChapter({...chapter,[event.target.name]:event.target.value})\r\n      }\r\n\r\n    const handleEditorChange = ({ html, text }) => {\r\n        const newValue = text.replace(/\\d/g, \"\");\r\n        setChapter({...chapter,text:newValue})      };\r\n  \r\n      const createChapterHandler = async (event) =>{\r\n          event.preventDefault()\r\n          try {\r\n        const data = await request(`/api/user/addChapter/${chapterId}`,'POST',{...chapter},{\r\n            Authorization:`Beare ${token}`\r\n\r\n        })\r\n        message(data.message)\r\n          } catch (e) {\r\n              \r\n          }\r\n      }\r\n\r\n      const mdParser = new MarkdownIt();\r\n\r\n      return(\r\n          <div className = 'container z-depth-5 '>\r\n               <div className=\"row container orange lighten-3  z-depth-4\">\r\n          <div className=\"col s12  center\"><h3> Название главы</h3></div>\r\n            <div className=\"input-field col s12\">\r\n              <textarea \r\n              id=\"textarea1\" \r\n              name = 'name'\r\n              className=\"materialize-textarea center\"\r\n              value = {chapter.name}\r\n              onChange = {changeHandler}\r\n              ></textarea>\r\n            </div>\r\n          </div>\r\n            <MdEditor\r\n                name = 'text'\r\n                value={chapter.text}\r\n                style={{ height: \"500px\" }}\r\n                renderHTML={(text) => mdParser.render(text)}\r\n                onChange={handleEditorChange}\r\n            />\r\n\r\n            <button className = 'btn right'\r\n            onClick = {createChapterHandler}\r\n            >Добавить главу</button>\r\n          </div>\r\n      )\r\n\r\n}","import React, { useCallback, useEffect, useState } from \"react\";\r\nimport { NavLink, useParams } from \"react-router-dom\";\r\nimport { Loader } from \"../components/Loader\";\r\nimport { useHttp } from \"../hooks/http.hook\";\r\n\r\nexport const SearchPage = () => {\r\n  const search = useParams().keyword;\r\n  const { request, loading } = useHttp();\r\n  const [chapter, setChapter] = useState(null);\r\n\r\n  const getChapter = useCallback(async () => {\r\n    try {\r\n      const fetched = await request(`/api/fanfic/search`, \"POST\", {\r\n        search: search,\r\n      });\r\n      setChapter(fetched);\r\n    } catch (e) {}\r\n  }, [search, request]);\r\n\r\n  useEffect(() => {\r\n    getChapter();\r\n  }, [getChapter, search]);\r\n\r\n  if (loading) {\r\n    return <Loader />;\r\n  }\r\n\r\n  if (chapter && !loading) {\r\n    return (\r\n      <div className=\"container\">\r\n        {chapter.map((e) => {\r\n          return (\r\n            <div className=\" container  \" key={e._id}>\r\n              <NavLink style={{ display: \"block\" }} to={`/fanfic/${e._id}`}>\r\n                <div className=\"col s12 m6\">\r\n                  <div className=\"card deep-orange darken-1 hover\">\r\n                    <div className=\"card-content white-text\">\r\n                      <span className=\"card-title\">{e.title}</span>\r\n                      <p>{e.description}</p>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </NavLink>\r\n            </div>\r\n          );\r\n        })}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <h1>По результатам запроса ничего не найдено</h1>\r\n    </div>\r\n  );\r\n};\r\n","import React, { useCallback, useContext, useEffect, useState } from \"react\";\r\nimport MarkdownIt from \"markdown-it\";\r\nimport MdEditor from \"react-markdown-editor-lite\";\r\nimport { AuthContext } from \"../context/AuthContext\";\r\nimport { useHttp } from \"../hooks/http.hook\";\r\nimport { useMessage } from \"../hooks/message.hook\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport { Loader } from \"../components/Loader\";\r\n\r\nexport const ChangeChapterPage = () => {\r\n  const mdParser = new MarkdownIt();\r\n  const { token } = useContext(AuthContext);\r\n  const { request, loading, error, clearError } = useHttp();\r\n  const message = useMessage();\r\n  const chapterId = useParams().id;\r\n  const [chapter, setChapter] = useState({ name: \"\", text: \"\" });\r\n  const getChapter = useCallback(async () => {\r\n    try {\r\n      const fetched = await request(\r\n        `/api/user/chapter/${chapterId}`,\r\n        \"GET\",\r\n        null,\r\n        {\r\n          Authorization: `Beare ${token}`,\r\n        }\r\n      );\r\n\r\n      setChapter({\r\n        name: fetched.chapters[0].name,\r\n        text: fetched.chapters[0].text,\r\n      });\r\n    } catch (e) {}\r\n  }, [token, chapterId, request]);\r\n\r\n  useEffect(() => {\r\n    getChapter();\r\n  }, [getChapter]);\r\n\r\n  useEffect(() => {\r\n    message(error);\r\n    clearError();\r\n  }, [error, message, clearError]);\r\n\r\n  const changeHandler = (event) => {\r\n    setChapter({ ...chapter, [event.target.name]: event.target.value });\r\n  };\r\n\r\n  const handleEditorChange = ({ html, text }) => {\r\n    const newValue = text.replace(/\\d/g, \"\");\r\n    setChapter({ ...chapter, text: newValue });\r\n  };\r\n\r\n  const createChapterHandler = async (event) => {\r\n    event.preventDefault();\r\n    try {\r\n      const data = await request(\r\n        `/api/user/chapterChange/${chapterId}`,\r\n        \"POST\",\r\n        { ...chapter },\r\n        {\r\n          Authorization: `Beare ${token}`,\r\n        }\r\n      );\r\n      message(data.message);\r\n    } catch (e) {}\r\n  };\r\n\r\n  if (loading) {\r\n    return <Loader />;\r\n  }\r\n  return (\r\n    <div className=\"container z-depth-5 \">\r\n      <div className=\"row container orange lighten-3  z-depth-4\">\r\n        <div className=\"col s12  center\">\r\n          <h3> Название главы</h3>\r\n        </div>\r\n        <div className=\"input-field col s12\">\r\n          <textarea\r\n            id=\"textarea1\"\r\n            name=\"name\"\r\n            className=\"materialize-textarea center\"\r\n            value={chapter.name}\r\n            onChange={changeHandler}\r\n          ></textarea>\r\n        </div>\r\n      </div>\r\n      <MdEditor\r\n        name=\"text\"\r\n        value={chapter.text}\r\n        style={{ height: \"500px\" }}\r\n        renderHTML={(text) => mdParser.render(text)}\r\n        onChange={handleEditorChange}\r\n      />\r\n\r\n      <button className=\"btn right\" onClick={createChapterHandler}>\r\n        Изменить\r\n      </button>\r\n    </div>\r\n  );\r\n};\r\n","import {useState,useCallback,useEffect} from 'react'\r\nconst storageName = 'userData'\r\nexport const useAuth = () =>{\r\n    const [token,setToken] = useState(null)\r\n    const [userId,setUserId] = useState(null)\r\n    const [ready,setReady] = useState(false)\r\n    const [email,setEmail] = useState(null)\r\n\r\n    const login = useCallback((jwtToken,id,mail)=>{\r\n        setToken(jwtToken)\r\n        setUserId(id)\r\n        setEmail(mail)\r\n        localStorage.setItem(storageName,JSON.stringify({\r\n            userId:id,token:jwtToken,email:mail\r\n        }))\r\n    },[])\r\n    const logout = useCallback(()=>{\r\n        setToken(null)\r\n        setUserId(null)\r\n        setEmail(null)\r\n        localStorage.removeItem(storageName)\r\n    },[])\r\n\r\n    useEffect(()=>{\r\n        const data = JSON.parse(localStorage.getItem(storageName))\r\n\r\n        if(data && data.token){\r\n            login(data.token,data.userId,data.email)\r\n        }\r\n        setReady(true)\r\n    },[login])\r\n\r\n\r\n    return {login,logout,token,userId,ready,email}\r\n\r\n}","export const locales = {\r\n    EN:'en',\r\n    RU:'ru'\r\n}","import React from \"react\";\r\nimport { NativeSelect } from \"@material-ui/core\";\r\nimport { locales } from \"./localization/locales\";\r\n\r\nexport const LocalePicker = ({currentLocale,onLocalChange}) => {\r\n    const handleChange = event =>{\r\n        localStorage.setItem('locale',event.target.value)\r\n        onLocalChange(event.target.value)\r\n    }\r\n  return (\r\n    <NativeSelect \r\n    value = {currentLocale}\r\n    onChange = {handleChange}\r\n    id=\"demo-controlled-open-select\" name=\"genre\">\r\n      <option value={locales.EN}>\r\n    EN\r\n      </option>\r\n      <option value={locales.RU}>\r\n       RU\r\n      </option>\r\n    </NativeSelect>\r\n  );\r\n};\r\n","import React, { useContext, useEffect, useState } from \"react\";\r\nimport { NavLink, useHistory } from \"react-router-dom\";\r\nimport { AuthContext } from \"../context/AuthContext\";\r\nimport { useAuth } from \"../hooks/auth.hook\";\r\nimport { FormattedMessage } from \"react-intl\";\r\nimport { LocalePicker } from \"./LocalePicker\";\r\n\r\nexport const Navbar = ({ currentLocale, onLocalChange }) => {\r\n  const [search, setSearch] = useState({ name: \"\" });\r\n  const { token } = useAuth();\r\n  const isAuthenticated = !!token;\r\n  const auth = useContext(AuthContext);\r\n  const history = useHistory();\r\n  const logoutHandler = (event) => {\r\n    event.preventDefault();\r\n    auth.logout();\r\n    window.location.reload();\r\n  };\r\n\r\n  useEffect(() => {\r\n    var sidenav = document.querySelector(\".sidenav\");\r\n    window.M.Sidenav.init(sidenav, {\r\n      edge: \"right\",\r\n    });\r\n  });\r\n\r\n  const changeHandler = (event) => {\r\n    setSearch({ ...search, [event.target.name]: event.target.value });\r\n  };\r\n\r\n  const searchHandler = (event) => {\r\n    event.preventDefault();\r\n    history.push(`/search/${search.name || \"search\"}`);\r\n    setSearch({ ...search, name: \"\" });\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <nav>\r\n        <div className=\"nav-wrapper  orange darken-4\">\r\n          <div className=\"search-container\">\r\n            <div className=\"input-field container\">\r\n              <input\r\n                id=\"search\"\r\n                type=\"search\"\r\n                value={search.name}\r\n                name=\"name\"\r\n                onChange={changeHandler}\r\n                className=\"color-input\"\r\n              />\r\n              <label className=\"label-icon\" htmlFor=\"search\">\r\n                <i className=\"material-icons\">search</i>\r\n              </label>\r\n            </div>\r\n            <button className=\"btn orange darken-1\" onClick={searchHandler}>\r\n            <FormattedMessage id=\"navigation-menu.search\" />\r\n            </button>\r\n          </div>\r\n          <a\r\n            href=\"#!\"\r\n            data-target=\"mobile-demo\"\r\n            className=\"sidenav-trigger right\"\r\n          >\r\n            <i className=\"material-icons\">menu</i>\r\n          </a>\r\n          <ul className=\"right hide-on-med-and-down \">\r\n            <li>\r\n              <LocalePicker\r\n                currentLocale={currentLocale}\r\n                onLocalChange={onLocalChange}\r\n              />\r\n            </li>\r\n\r\n            <li hidden={!isAuthenticated}>\r\n              <NavLink to=\"/admin\">\r\n                <FormattedMessage id=\"navigation-menu.admin\" />\r\n              </NavLink>\r\n            </li>\r\n            <li className=\"waves-effect waves-light\">\r\n              <NavLink to=\"/\">\r\n                <FormattedMessage id=\"navigation-menu.home\" />\r\n              </NavLink>\r\n            </li>\r\n            <li hidden={!isAuthenticated}>\r\n              <NavLink to=\"/account\">\r\n                <FormattedMessage id=\"navigation-menu.account\" />\r\n              </NavLink>\r\n            </li>\r\n            <li className=\"waves-effect waves-light\">\r\n              <NavLink to=\"/authenticated\" hidden={isAuthenticated}>\r\n                <FormattedMessage id=\"navigation-menu.auth\" />\r\n              </NavLink>\r\n            </li>\r\n            <li>\r\n              <a href=\"/\" onClick={logoutHandler} hidden={!isAuthenticated}>\r\n                <FormattedMessage id=\"navigation-menu.exit\" />\r\n              </a>\r\n            </li>\r\n          </ul>\r\n        </div>\r\n      </nav>\r\n      <ul className=\"sidenav\" id=\"mobile-demo\">\r\n      <li>\r\n              <LocalePicker\r\n                currentLocale={currentLocale}\r\n                onLocalChange={onLocalChange}\r\n              />\r\n            </li>\r\n\r\n            <li hidden={!isAuthenticated}>\r\n              <NavLink to=\"/admin\">\r\n                <FormattedMessage id=\"navigation-menu.admin\" />\r\n              </NavLink>\r\n            </li>\r\n            <li className=\"waves-effect waves-light\">\r\n              <NavLink to=\"/\">\r\n                <FormattedMessage id=\"navigation-menu.home\" />\r\n              </NavLink>\r\n            </li>\r\n            <li hidden={!isAuthenticated}>\r\n              <NavLink to=\"/account\">\r\n                <FormattedMessage id=\"navigation-menu.account\" />\r\n              </NavLink>\r\n            </li>\r\n            <li  hidden={isAuthenticated} >\r\n              <NavLink to=\"/authenticated\" hidden={isAuthenticated}>\r\n                <FormattedMessage id=\"navigation-menu.auth\" />\r\n              </NavLink>\r\n            </li>\r\n            <li  hidden={!isAuthenticated}>\r\n              <a href=\"/\" onClick={logoutHandler}>\r\n                <FormattedMessage id=\"navigation-menu.exit\" />\r\n              </a>\r\n            </li>\r\n      </ul>\r\n    </div>\r\n  );\r\n};\r\n","import React, { useState } from 'react'\nimport {BrowserRouter as Router} from 'react-router-dom'\nimport { useRoutes } from './routes';\nimport { useAuth } from './hooks/auth.hook';\nimport {AuthContext} from './context/AuthContext'\nimport { Navbar } from './components/Navbar';\nimport { Loader } from './components/Loader';\nimport {IntlProvider} from 'react-intl'\nimport ruMessage from './components/localization/ru'\nimport enMessage from './components/localization/en'\nimport { locales } from './components/localization/locales';\n\nimport 'materialize-css'\n\nconst messages = {\n  [locales.EN]:enMessage,\n  [locales.RU]:ruMessage\n}\nfunction App() {\n  const {token,login,logout,userId,ready,email} = useAuth()\n  const isAuthenticated = !!token\n  const routes = useRoutes(isAuthenticated)\n  const [currentLocale, setCurrentLocale] =useState(localStorage.getItem('locale' || locales.EN))\n  if(!ready){\n    return <Loader />\n  }\n  return (\n    <AuthContext.Provider value={{\n      token,login,logout,userId,isAuthenticated,email\n    }}>\n          <IntlProvider messages = {messages[currentLocale]}  locale={currentLocale} defaultLocale={locales.RU} >\n\n      <Router>\n        <Navbar currentLocale ={currentLocale} onLocalChange ={setCurrentLocale}/>\n        <div className = 'container'>\n          {routes}\n        </div>\n      </Router>\n      </IntlProvider>\n\n    </AuthContext.Provider>\n  )\n}\n\nexport default App;\n","import React from 'react'\r\nimport {Switch,Route,Redirect} from 'react-router-dom'\r\nimport {HomePage} from './pages/HomePage'\r\nimport {AccountPage} from './pages/AccountPage'\r\nimport {AuthPage} from './pages/AuthPage'\r\nimport { CreatePage } from './pages/CreatePage'\r\nimport { FanficPage } from './pages/FanficPage'\r\nimport { AdminPage } from './pages/AdminPage'\r\nimport { FanficChapterPage } from './pages/FanficChapterPage'\r\nimport { CreateChapterPage } from './pages/CreateChapterPage'\r\nimport { SearchPage } from './pages/SearchPage'\r\nimport { ChangeChapterPage } from './pages/ChangeChapterPage'\r\nexport const useRoutes = isAuthenticated =>{\r\n    if(isAuthenticated){\r\n        return(\r\n            <Switch>\r\n                 <Route path = \"/\" exact>\r\n                    <HomePage />\r\n                </Route>\r\n                <Route path = \"/account\">\r\n                    <AccountPage />\r\n                </Route>\r\n                <Route path = \"/create\">\r\n                    <CreatePage />\r\n                </Route>\r\n                <Route path = \"/fanfic/:id\">\r\n                    <FanficPage />\r\n                </Route>\r\n                <Route path = \"/admin\" exact>\r\n                    <AdminPage/>\r\n                </Route>\r\n                <Route path = \"/chapter/:id\">\r\n                    <FanficChapterPage />\r\n                </Route>\r\n                <Route path = \"/chapterAdd/:id\">\r\n                    <CreateChapterPage />\r\n                </Route>\r\n                <Route path = \"/search/:keyword\" >\r\n                    <SearchPage/>\r\n                </Route>\r\n                <Route path = \"/chapterChange/:id\" >\r\n                    <ChangeChapterPage/>\r\n                </Route>\r\n                \r\n                <Redirect to = \"/\"/>\r\n                \r\n            </Switch>\r\n        )\r\n    }\r\n\r\n\r\n    return(\r\n        <Switch>\r\n             <Route path = \"/fanfic/:id\">\r\n                    <FanficPage />\r\n                </Route>\r\n             <Route path = \"/\" exact>\r\n                <HomePage />\r\n            </Route>\r\n            <Route path = \"/chapter/:id\" exact>\r\n                <FanficChapterPage />\r\n            </Route>\r\n            <Route path = \"/authenticated\" exact>\r\n                <AuthPage />\r\n            </Route>\r\n            <Route path = \"/search/:keyword\" >\r\n                    <SearchPage/>\r\n                </Route>\r\n            <Redirect to = \"/\" />\r\n    </Switch>\r\n    )\r\n}","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}